<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title> Echo AI</title>

<style>
:root{
  --neon:#ff3b3b;
  --neon2:#ff8a8a;
  --card:rgba(15,18,35,0.75);
  --text:#f1f3ff;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  height:100vh;
  font-family:Segoe UI,system-ui,sans-serif;
  overflow:hidden;
  color:var(--text);
  background:#000;
}

/* EVIL VOID BACKGROUND SLIDESHOW */
body::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-3;
  background-size:cover;
  background-position:center;
  animation: evilSlideshow 35s infinite;
  filter:brightness(0.45) contrast(1.3) saturate(0.8);
}

@keyframes evilSlideshow{
  0%{background-image:url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986');}
  25%{background-image:url('https://images.unsplash.com/photo-1519681393784-d120267933ba');}
  50%{background-image:url('https://images.unsplash.com/photo-1484589065579-248aad0d8b13');}
  75%{background-image:url('https://images.unsplash.com/photo-1506459225024-1428097a7e18');}
  100%{background-image:url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986');}
}

.neon-strings,.waves{display:none;}

.app{
  width:95%;
  max-width:900px;
  height:90vh;
  margin:auto;
  margin-top:5vh;
  background:var(--card);
  border-radius:22px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  box-shadow:0 0 60px rgba(0,0,0,.8);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.1);
}

header{
  padding:16px;
  display:flex;
  align-items:center;
  gap:12px;
  background:rgba(0,0,0,0.7);
}

.logo{
  width:42px;
  height:42px;
  border-radius:50%;
  background:conic-gradient(var(--neon),var(--neon2),var(--neon));
  animation:spin 6s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}

/* CHAT AREA */
.chat{
  flex:1;
  padding:20px;
  overflow-y:auto;
  background:
    radial-gradient(circle at 20% 20%, rgba(255,80,80,0.12), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(120,180,255,0.12), transparent 45%),
    radial-gradient(circle at 50% 80%, rgba(180,120,255,0.12), transparent 45%),
    linear-gradient(rgba(0,0,0,0.25), rgba(0,0,0,0.25)),
    url('https://i.postimg.cc/prMhf0k9/bgpic.png');
  background-size:cover;
  background-position:center;
  filter: brightness(1.1);
}

/* MESSAGES */
.msg{
  max-width:75%;
  padding:12px 16px;
  margin-bottom:14px;
  border-radius:14px;
  line-height:1.4;
}

.user{
  margin-left:auto;
  background:linear-gradient(135deg,var(--neon2),var(--neon));
  color:#000;
}

.ai{
  background:rgba(20,20,35,0.9);
  border:1px solid rgba(255,255,255,0.2);
}

/* FOOTER */
footer{
  display:flex;
  gap:10px;
  padding:14px;
  background:rgba(0,0,0,0.75);
}

input{
  flex:1;
  padding:12px;
  border-radius:12px;
  border:none;
  background:rgba(11,14,28,0.9);
  color:var(--text);
}

button{
  padding:12px 16px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  background:linear-gradient(135deg,var(--neon),var(--neon2));
  font-weight:bold;
}

#triggerEcho{
  padding:10px 14px;
  font-size:0.9em;
  margin-top:8px;
}
</style>
</head>

<body>

<div class="app">
  <header>
    <div class="logo"></div>
    <div>
      <h2>Echo AI</h2>
      <small>Offline Smart Assistant</small>
      <br>
      <button id="triggerEcho" onclick="speakGreeting()">Trigger Echo</button>
    </div>
  </header>

  <div class="chat" id="chat"></div>

  <footer>
    <input id="input" placeholder="Ask Echo anything..." />
    <button onclick="send()">Send</button>
    <button onclick="startMic()">ðŸŽ¤</button>
    <button onclick="clearChat()">Clear</button>
  </footer>
</div>

<script>
const chat=document.getElementById('chat');
const input=document.getElementById('input');
let lastUserQuestion = null;

function addMsg(text,cls){
  const d=document.createElement('div');
  d.className='msg '+cls;
  d.innerText=text;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

function normalize(t){
  return t.toLowerCase().replace(/[^a-z0-9+\-*/^().âˆšâˆ› ]/g,' ').replace(/\s+/g,' ').trim();
}

function startMic(){
  if(!('webkitSpeechRecognition'in window)) return alert('Mic not supported');
  const rec=new webkitSpeechRecognition();
  rec.lang='en-IN';
  rec.onresult=e=>{
    input.value=e.results[0][0].transcript;
    send();
  };
  rec.start();
}

/* ONLY CHANGE IS HERE */
function speakGreeting(){
  const greeting="Greetings, I am Echo AI, your personal offline assistant"; 
  if('speechSynthesis' in window){
    speechSynthesis.cancel();

    function setMaleVoice(){
      const voices = speechSynthesis.getVoices();
      const maleVoice = voices.find(v =>
        v.name.toLowerCase().includes('male') ||
        v.name.toLowerCase().includes('david') ||
        v.name.toLowerCase().includes('mark') ||
        v.name.toLowerCase().includes('alex') ||
        v.name.toLowerCase().includes('daniel')
      );

      const utter = new SpeechSynthesisUtterance(greeting);
      utter.lang = 'en-IN';
      utter.rate = 1.15;
      if(maleVoice) utter.voice = maleVoice;

      speechSynthesis.speak(utter);
    }

    if(speechSynthesis.getVoices().length === 0){
      speechSynthesis.onvoiceschanged = setMaleVoice;
    } else {
      setMaleVoice();
    }
  }
}

function aiReply(text){
  const t=normalize(text);

  /* UPGRADE EASTER EGG */
  const rawUpgrade = text.trim().toLowerCase();
  if(rawUpgrade === "upgrade"){
    return "ðŸ”¥ SYSTEM UPGRADE INITIATED ðŸ”¥";
  }

  /* 67 EASTER EGG - EXACT MATCH ONLY */
  const raw = text.trim();
  if (/^(6+7+)$/.test(raw) && /^[67]+$/.test(raw)) {
    return "67";
  }

  if(/\b(previous question|last question|what did i ask before)\b/.test(t)){
    if(lastUserQuestion){
      return 'Your previous question was: "' + lastUserQuestion + '"';
    }else{
      return 'You have not asked any question before.';
    }
  }

  if(/\b(time)\b/.test(t))
    return 'ðŸ•’ Current Time (IST): '+new Date().toLocaleTimeString('en-IN',{timeZone:'Asia/Kolkata'});
  if(/\b(date)\b/.test(t))
    return 'ðŸ“… Today\'s Date (IST): '+new Date().toLocaleDateString('en-IN',{timeZone:'Asia/Kolkata'});

  if(/[0-9]/.test(t) || /(square root|cube root|sqrt|cbrt|âˆš|âˆ›)/.test(t)){
    try{
      let expr = t
        .replace(/square root/g,'Math.sqrt')
        .replace(/cube root/g,'Math.cbrt')
        .replace(/sqrt/g,'Math.sqrt')
        .replace(/cbrt/g,'Math.cbrt')
        .replace(/âˆš/g,'Math.sqrt')
        .replace(/âˆ›/g,'Math.cbrt')
        .replace(/\^/g,'**');

      if(/[0-9]/.test(expr) && /[+\-*^]|Math\.sqrt|Math\.cbrt/.test(expr)){
        return 'ðŸ§® Result: ' + Function('return ' + expr)();
      }
    }catch{}
  }

  const qa=[
    [['who are you','what are you'],'I am Echo AI, an offline smart assistant.'],
    [['who made you','who created you'],'I was made by Sriram Pathruni, Shreyas Sreedharan, and Kavin Kashyap.'],
    [['photosynthesis'],'Photosynthesis is the process by which green plants make food using sunlight, water, and COâ‚‚.'],
    [['gravity'],'Gravity is the force that attracts objects toward each other.'],
    [['friction'],'Friction is the force that resists motion between two surfaces.'],
    [['prime number'],'A prime number has exactly two factors: 1 and itself.'],
    [['fraction'],'A fraction represents a part of a whole.'],
    [['decimal'],'A decimal represents numbers using a decimal point.'],
    [['triangle'],'Triangles have three sides and an angle sum of 180Â°.'],
    [['newton'],'Newtonâ€™s Third Law: every action has an equal and opposite reaction.'],
    [['capital of india'],'The capital of India is New Delhi.'],
    [['largest planet'],'The largest planet in our solar system is Jupiter.'],
    [['smallest planet'],'The smallest planet in our solar system is Mercury.'],
    [['who invented telephone'],'Alexander Graham Bell invented the telephone.'],
    [['who invented light bulb'],'Thomas Edison invented the practical electric light bulb.'],
    [['national animal of india'],'The national animal of India is the Bengal Tiger.'],
    [['national bird of india'],'The national bird of India is the Peacock.'],
    [['speed of light'],'The speed of light is approximately 3 Ã— 10^8 meters per second.'],
    [['are you better than chatgpt'],'That depends ðŸ˜Ž. ChatGPT lives on the internet... I live in your device. I work offline, donâ€™t need WiFi, and never get tired. So letâ€™s just sayâ€¦ Iâ€™m built different. ðŸ¤–ðŸ”¥']
  ];

  if(/\b(hi|hello|hey)\b/.test(t)) {
    speakGreeting();
    return 'Greetings, I am Echo AI, your personal offline assistant';
  }

  for(const [keys,reply] of qa){
    if(keys.some(k=>t.includes(k))) return reply;
  }

  if(/\b(thanks|thank you|thx|ty)\b/.test(t)) return 'Youâ€™re very welcome ðŸ˜Š';
  if(/\b(bye|cya|see you)\b/.test(t)) return 'Goodbye ðŸ‘‹';

  return 'I am sorry, I cannot help you with this question because I am an offline AI and can answer only from a predefined set of questions.';
}

function send(){
  const text=input.value.trim();
  if(!text) return;
  input.value='';
  addMsg(text,'user');

  const reply = aiReply(text);

  setTimeout(()=>{
    addMsg(reply,'ai');
    lastUserQuestion = text;
  },400);
}

function clearChat(){
  chat.innerHTML='';
  addMsg('Greetings, I am Echo AI, your personal offline assistant','ai');
}

input.addEventListener('keydown',e=>{
  if(e.key==='Enter') send();
});

window.addEventListener('load',()=>{
  addMsg('Greetings, I am Echo AI, your personal offline assistant','ai');
});
</script>

</body>
</html>
